{% load static %}
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<div class="flex-grow-1 d-flex flex-column">
	<div class="container mt-5 pt-2">
		<div class="card shadow rounded-2">
			<div class="card-header text-center bg-primary font-balsamiq text-secondary-emphasis rounded-top-2 pt-3">
				<h2 class="fs-4">Invaders Leaderboard</h2>
			</div>
			<div class="card-body p-3">
				<table class="table table-striped table-hover leaderboard-table">
					<thead>
						<tr class="font-balsamiq">
							<th>Score</th>
							<th>Player</th>
							<th>Date</th>
							<th>Game</th>
						</tr>
					</thead>
					<tbody id="leaderboard-body">
						<!-- Data will be here -->
					</tbody>
				</table>
			</div>
		</div>
	</div>
	<script>
		$(document).ready(function() {
			console.log('Fetching leaderboard data...');
			$.ajax({
				url: "{% url 'invader_leaderboard' %}",
				method: 'GET',
				success: function(data) {
					var leaderboardBody = $('#leaderboard-body');
					leaderboardBody.empty();
					data.forEach(function(item, index) {
						var row = `<tr>
							<td>${item.score}</td>
							<td>${item.display_name}</td>
							<td>${new Date(item.date).toLocaleString()}</td>
							<td>${item.game}</td>
						</tr>`;
						leaderboardBody.append(row);
					});
				},
				error: function(error) {
					console.error('Error fetching leaderboard data:', error);
				}
			});
		});
	</script>
</div>

