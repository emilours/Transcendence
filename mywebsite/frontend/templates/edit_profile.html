{% load static %}
<section class="d-flex align-items-center justify-content-center mt-5">
	<div class="container mb-5">
		<div class="row justify-content-center mt-2 g-3">
			<div class="col-12 col-lg-8">
				<div class="card shadow rounded-4">
					<div class="card-header text-center bg-primary font-potta rounded-top-4">
						<h2 class="font-balsamiq text-secondary-emphasis">Edit Profile</h2>
					</div>
					<div class="card-body p-5 text-secondary-emphasis">
						<form id="edit-profile-form" method="POST" enctype="multipart/form-data" action="{% url 'authentification:update_profile' %}">
							{% csrf_token %}
							<div class="form-floating mb-3">
								<input type="text" id="first_name" name="first_name" maxlength="20" class="form-control text-secondary-emphasis rounded-1" value="{{ user.first_name }}" required>
								<label for="first_name" style="opacity: 0.7;">First Name:</label>
							</div>

							<div class="form-floating mb-3">
								<input type="text" id="last_name" name="last_name" maxlength="20" class="form-control text-secondary-emphasis rounded-1" value="{{ user.last_name }}" required>
								<label for="last_name" style="opacity: 0.7;">Last Name:</label>
							</div>

							<div class="form-floating mb-3">
								<input type="text" id="display_name" name="display_name" maxlength="12" class="form-control text-secondary-emphasis rounded-1" value="{{ user.display_name }}" required>
								<label for="display_name" style="opacity: 0.7;">Display Name:</label>
							</div>

							<div class="form-group mb-3">
								<div class="d-flex justify-content-center">
									<input type="radio" class="btn-check" name="avatar_option" id="predefined-option" autocomplete="off" checked>
									<label class="btn btn-secondary text-secondary-emphasis me-3" for="predefined-option" data-bs-toggle="collapse" data-bs-target="#predefined-avatars" aria-expanded="true" aria-controls="predefined-avatars" onclick="document.getElementById('upload-avatar').classList.remove('show')">Choose a New Avatar</label>

									<input type="radio" class="btn-check" name="avatar_option" id="upload-option" autocomplete="off">
									<label class="btn btn-secondary text-secondary-emphasis" for="upload-option" data-bs-toggle="collapse" data-bs-target="#upload-avatar" aria-expanded="false" aria-controls="upload-avatar" onclick="document.getElementById('predefined-avatars').classList.remove('show')">Upload Avatar</label>
								</div>
							</div>

							<div id="predefined-avatars" class="collapse form-group mb-3 show">
								<label for="avatar">Choose a new avatar:</label>
								<div class="d-flex flex-wrap justify-content-start">
									{% for avatar in predefined_avatars %}
									<label class="avatar-option me-3 mb-3 mb-md-0">
										<input type="radio" name="avatar_choice" value="{{ avatar.url }}" {% if user.avatar.url == avatar.url %}checked{% endif %}>
										<img src="{{ avatar.url }}" alt="Predefined avatar" class="img-thumbnail img-fluid" style="width: 100px; height: 100px;">
									</label>
									{% endfor %}
								</div>
							</div>

							<div id="upload-avatar" class="collapse form-group mb-3 text-secondary-emphasis">
								<label for="avatar">Upload your own avatar:</label>
								<input type="file" id="avatar" name="avatar" class="form-control">
							</div>

							<button type="submit" class="btn btn-primary w-100">Save Changes</button>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>

